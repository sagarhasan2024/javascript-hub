<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Generators Explained</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        h1 {
            color: #1a2a6c;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .subtitle {
            color: #b21f1f;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }
        
        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }
        }
        
        .explanation, .examples {
            background: rgba(255, 255, 255, 0.9);
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        h2 {
            color: #1a2a6c;
            margin-bottom: 15px;
            border-bottom: 2px solid #fdbb2d;
            padding-bottom: 10px;
        }
        
        h3 {
            color: #b21f1f;
            margin: 15px 0 10px;
        }
        
        p {
            margin-bottom: 15px;
        }
        
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            position: relative;
        }
        
        .code-title {
            background: #1a2a6c;
            color: white;
            padding: 5px 10px;
            border-radius: 3px;
            display: inline-block;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }
        
        .interactive-demo {
            margin-top: 20px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 5px;
            border-left: 4px solid #1a2a6c;
        }
        
        button {
            background: #1a2a6c;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px 10px 0;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #b21f1f;
        }
        
        input, select {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin: 5px;
            width: 200px;
        }
        
        .output {
            margin-top: 15px;
            padding: 10px;
            background: #e9e9e9;
            border-radius: 5px;
            min-height: 40px;
            font-family: 'Courier New', monospace;
        }
        
        .generator-concepts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .concept-card {
            background: white;
            border: 2px solid #1a2a6c;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        
        .concept-card h4 {
            color: #1a2a6c;
            margin-bottom: 10px;
        }
        
        .generator-flow {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
        }
        
        .flow-step {
            background: white;
            border: 2px solid #1a2a6c;
            border-radius: 8px;
            padding: 12px 15px;
            margin: 8px 0;
            width: 80%;
            text-align: center;
            position: relative;
        }
        
        .flow-arrow {
            font-size: 20px;
            color: #1a2a6c;
        }
        
        .highlight {
            background-color: #ffeb3b;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .note {
            background: #e7f3ff;
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid #1a2a6c;
            margin: 15px 0;
        }
        
        .warning {
            background: #ffeaa7;
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid #e17055;
            margin: 15px 0;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid #ddd;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 10px 15px;
            cursor: pointer;
            background: #f1f1f1;
            border: 1px solid #ddd;
            border-bottom: none;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
            margin-bottom: 5px;
        }
        
        .tab.active {
            background: #1a2a6c;
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .visualization {
            position: relative;
            height: 200px;
            border: 2px dashed #1a2a6c;
            border-radius: 10px;
            margin: 20px 0;
            background: #f8f9fa;
            overflow: hidden;
        }
        
        .generator-state {
            position: absolute;
            width: 140px;
            padding: 10px;
            background: #1a2a6c;
            color: white;
            border-radius: 5px;
            text-align: center;
            animation: generatorFlow 8s infinite;
        }
        
        @keyframes generatorFlow {
            0% { top: 20px; left: 20px; background: #1a2a6c; }
            25% { top: 20px; left: calc(100% - 160px); background: #b21f1f; }
            50% { top: calc(100% - 60px); left: calc(100% - 160px); background: #fdbb2d; color: #333; }
            75% { top: calc(100% - 60px); left: 20px; background: #28a745; }
            100% { top: 20px; left: 20px; background: #1a2a6c; }
        }
        
        .yield-point {
            position: absolute;
            width: 120px;
            padding: 8px;
            background: #b21f1f;
            color: white;
            border-radius: 5px;
            text-align: center;
            animation: yieldPoint 8s infinite;
            animation-delay: 2s;
        }
        
        @keyframes yieldPoint {
            0% { top: calc(100% - 50px); left: 50px; opacity: 0; }
            25% { top: calc(100% - 50px); left: 50px; opacity: 1; }
            50% { top: 50px; left: 50px; opacity: 1; }
            75% { top: 50px; left: 50px; opacity: 0; }
            100% { top: calc(100% - 50px); left: 50px; opacity: 0; }
        }
        
        .method-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .method-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        
        .method-card h4 {
            color: #1a2a6c;
            margin-bottom: 10px;
        }
        
        .success {
            color: #28a745;
        }
        
        .error {
            color: #b21f1f;
        }
        
        .data-input {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        
        .data-input input {
            flex: 1;
            margin-right: 10px;
        }
        
        .generator-status {
            display: flex;
            align-items: center;
            margin: 15px 0;
            padding: 10px;
            background: #f0f0f0;
            border-radius: 5px;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .status-paused {
            background: #fdbb2d;
        }
        
        .status-running {
            background: #28a745;
        }
        
        .status-completed {
            background: #b21f1f;
        }
        
        .sequence-visual {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin: 10px 0;
            padding: 10px;
            background: #f0f0f0;
            border-radius: 5px;
            min-height: 60px;
        }
        
        .sequence-item {
            background: #1a2a6c;
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .current-item {
            background: #b21f1f;
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(178, 31, 31, 0.5);
        }
        
        .generated-item {
            background: #28a745;
        }
        
        .control-panel {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        @media (max-width: 768px) {
            .comparison {
                grid-template-columns: 1fr;
            }
        }
        
        .comparison-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .comparison-card h4 {
            color: #1a2a6c;
            margin-bottom: 10px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>JavaScript Generators</h1>
            <p class="subtitle">Master functions that can pause and resume execution</p>
        </header>
        
        <div class="content">
            <div class="explanation">
                <h2>What are Generator Functions?</h2>
                <p>Generator functions are special functions that can be paused and resumed, allowing you to control the execution flow and produce multiple values over time.</p>
                
                <div class="generator-concepts">
                    <div class="concept-card">
                        <h4>‚è∏Ô∏è Pausable</h4>
                        <p>Can pause execution with yield</p>
                    </div>
                    <div class="concept-card">
                        <h4>‚ñ∂Ô∏è Resumable</h4>
                        <p>Can resume from where it left off</p>
                    </div>
                    <div class="concept-card">
                        <h4>üîÑ Iterable</h4>
                        <p>Produce sequences of values</p>
                    </div>
                    <div class="concept-card">
                        <h4>‚ö° Lazy Evaluation</h4>
                        <p>Values generated on demand</p>
                    </div>
                </div>
                
                <div class="visualization">
                    <div class="generator-state">Generator Created</div>
                    <div class="yield-point">Yield Point</div>
                </div>
                
                <h3>How Generators Work</h3>
                <div class="generator-flow">
                    <div class="flow-step">1. Define generator function with function*</div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">2. Call generator to get iterator object</div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">3. Use next() to execute until next yield</div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">4. Generator pauses and returns value</div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">5. Repeat until generator completes</div>
                </div>
                
                <div class="tabs">
                    <div class="tab active" onclick="switchTab(event, 'syntax-tab')">Basic Syntax</div>
                    <div class="tab" onclick="switchTab(event, 'yield-tab')">Yield Keyword</div>
                    <div class="tab" onclick="switchTab(event, 'methods-tab')">Generator Methods</div>
                </div>
                
                <div id="syntax-tab" class="tab-content active">
                    <h4>Generator Function Syntax</h4>
                    <div class="code-block">
<span class="code-title">Creating a Generator Function</span>
// Note the asterisk (*) after function
function* numberGenerator() {
    yield 1;
    yield 2;
    yield 3;
}

// Using the generator
const generator = numberGenerator();

console.log(generator.next()); // { value: 1, done: false }
console.log(generator.next()); // { value: 2, done: false }
console.log(generator.next()); // { value: 3, done: false }
console.log(generator.next()); // { value: undefined, done: true }
                    </div>
                </div>
                
                <div id="yield-tab" class="tab-content">
                    <h4>The Yield Keyword</h4>
                    <div class="code-block">
<span class="code-title">Yield Pauses Execution</span>
function* messageGenerator() {
    console.log('Starting generator...');
    yield 'First message';
    console.log('Resumed execution...');
    yield 'Second message';
    console.log('Generator completed');
}

const gen = messageGenerator();
// Nothing logged yet - generator not started

const first = gen.next(); 
// Logs: "Starting generator..."
// first = { value: 'First message', done: false }

const second = gen.next();
// Logs: "Resumed execution..."
// second = { value: 'Second message', done: false }
                    </div>
                </div>
                
                <div id="methods-tab" class="tab-content">
                    <h4>Generator Object Methods</h4>
                    <div class="method-grid">
                        <div class="method-card">
                            <h4>next()</h4>
                            <p>Resume execution until next yield</p>
                        </div>
                        <div class="method-card">
                            <h4>return()</h4>
                            <p>Stop generator immediately</p>
                        </div>
                        <div class="method-card">
                            <h4>throw()</h4>
                            <p>Throw error into generator</p>
                        </div>
                    </div>
                </div>
                
                <div class="note">
                    <strong>Key Insight:</strong> Generators provide a way to create iterators without implementing the full iterator protocol manually. They're perfect for handling sequences, async operations, and complex control flows.
                </div>
                
                <h2>Generator Return Values</h2>
                <p>Each call to <code>next()</code> returns an object with two properties:</p>
                
                <div class="comparison">
                    <div class="comparison-card">
                        <h4>value</h4>
                        <p>The value yielded by the generator</p>
                        <div class="code-block" style="font-size: 0.8rem;">
{ value: 'some value', done: false }
                        </div>
                    </div>
                    <div class="comparison-card">
                        <h4>done</h4>
                        <p>Boolean indicating if generator is complete</p>
                        <div class="code-block" style="font-size: 0.8rem;">
{ value: undefined, done: true }
                        </div>
                    </div>
                </div>
                
                <div class="note">
                    <strong>Remember:</strong> Generator functions don't execute when called - they return a generator object that controls the execution.
                </div>
            </div>
            
            <div class="examples">
                <h2>Interactive Examples</h2>
                
                <div class="interactive-demo">
                    <h3>Example 1: Basic Number Generator</h3>
                    <p>Create a simple generator that yields numbers in sequence.</p>
                    <div class="code-block">
function* numberSequence() {
    let num = 1;
    while (num <= 5) {
        yield num;
        num++;
    }
}

const sequence = numberSequence();
let result = sequence.next();

while (!result.done) {
    console.log(result.value);
    result = sequence.next();
}
// Output: 1, 2, 3, 4, 5
                    </div>
                    <div class="control-panel">
                        <button onclick="createNumberGenerator()">Create Generator</button>
                        <button onclick="nextNumber()">Next Number</button>
                        <button onclick="resetNumberGenerator()">Reset</button>
                    </div>
                    <div class="generator-status">
                        <div class="status-indicator status-paused" id="number-status"></div>
                        <span id="number-status-text">Generator ready to create</span>
                    </div>
                    <div class="sequence-visual" id="number-sequence"></div>
                    <div class="output" id="number-output">
                        Click "Create Generator" to start
                    </div>
                </div>
                
                <div class="interactive-demo">
                    <h3>Example 2: Fibonacci Sequence</h3>
                    <p>Generate an infinite Fibonacci sequence using generators.</p>
                    <div class="code-block">
function* fibonacci() {
    let a = 0, b = 1;
    
    while (true) {
        yield a;
        [a, b] = [b, a + b];
    }
}

const fib = fibonacci();
console.log(fib.next().value); // 0
console.log(fib.next().value); // 1
console.log(fib.next().value); // 1
console.log(fib.next().value); // 2
// Can continue indefinitely...
                    </div>
                    <div class="control-panel">
                        <button onclick="createFibonacciGenerator()">Create Fibonacci</button>
                        <button onclick="nextFibonacci()">Next Fibonacci</button>
                        <button onclick="resetFibonacci()">Reset</button>
                    </div>
                    <div class="sequence-visual" id="fibonacci-sequence"></div>
                    <div class="output" id="fibonacci-output">
                        Create a Fibonacci generator to start
                    </div>
                </div>
                
                <div class="interactive-demo">
                    <h3>Example 3: Two-Way Communication</h3>
                    <p>Pass values into the generator using next() arguments.</p>
                    <div class="code-block">
function* twoWayGenerator() {
    const name = yield 'What is your name?';
    const age = yield `Hello ${name}! How old are you?`;
    return `Nice to meet you, ${name} (${age} years old)!`;
}

const conversation = twoWayGenerator();
console.log(conversation.next().value); // "What is your name?"
console.log(conversation.next('Alice').value); // "Hello Alice! How old are you?"
console.log(conversation.next(25).value); // "Nice to meet you, Alice (25 years old)!"
                    </div>
                    <div class="control-panel">
                        <button onclick="startConversation()">Start Conversation</button>
                        <input type="text" id="conversation-input" placeholder="Enter your response">
                        <button onclick="sendResponse()">Send Response</button>
                        <button onclick="resetConversation()">Reset</button>
                    </div>
                    <div class="output" id="conversation-output">
                        Click "Start Conversation" to begin
                    </div>
                </div>
                
                <div class="interactive-demo">
                    <h3>Example 4: Async Generator with Promises</h3>
                    <p>Use generators to handle asynchronous operations sequentially.</p>
                    <div class="code-block">
function* asyncTaskGenerator() {
    const user = yield fetch('/api/user');
    const posts = yield fetch('/api/posts');
    const comments = yield fetch('/api/comments');
    return { user, posts, comments };
}

// Runner function for async generators
function runAsyncGenerator(generator) {
    const iterator = generator();
    
    function handle(result) {
        if (result.done) return result.value;
        
        return result.value.then(data => {
            return handle(iterator.next(data));
        });
    }
    
    return handle(iterator.next());
}
                    </div>
                    <div class="control-panel">
                        <button onclick="simulateAsyncTasks()">Run Async Tasks</button>
                        <button onclick="resetAsync()">Reset</button>
                    </div>
                    <div class="output" id="async-output">
                        Click to simulate sequential API calls
                    </div>
                </div>
                
                <div class="interactive-demo">
                    <h3>Example 5: Custom Iterable with Generator</h3>
                    <p>Create custom iterable objects using generators.</p>
                    <div class="code-block">
const customIterable = {
    data: ['apple', 'banana', 'cherry'],
    
    *[Symbol.iterator]() {
        for (let item of this.data) {
            yield item.toUpperCase();
        }
    }
};

// Can use with for...of
for (let fruit of customIterable) {
    console.log(fruit); // APPLE, BANANA, CHERRY
}

// Or with spread operator
const fruits = [...customIterable];
// fruits = ['APPLE', 'BANANA', 'CHERRY']
                    </div>
                    <div class="control-panel">
                        <button onclick="createCustomIterable()">Create Custom Iterable</button>
                        <button onclick="iterateCustom()">Iterate Items</button>
                        <button onclick="resetIterable()">Reset</button>
                    </div>
                    <div class="sequence-visual" id="iterable-sequence"></div>
                    <div class="output" id="iterable-output">
                        Create a custom iterable to start
                    </div>
                </div>
                
                <div class="warning">
                    <strong>Generator Benefits:</strong>
                    <ul>
                        <li>Lazy evaluation - values generated on demand</li>
                        <li>Memory efficient for large sequences</li>
                        <li>Clean async code with generators + promises</li>
                        <li>Complex control flows become manageable</li>
                        <li>Perfect for implementing custom iterators</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching functionality
        function switchTab(event, tabId) {
            // Remove active class from all tabs and tab contents
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Add active class to clicked tab and corresponding content
            event.currentTarget.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }
        
        // ========== EXAMPLE 1: Basic Number Generator ==========
        let numberGenerator = null;
        let currentNumber = 0;
        
        function createNumberGenerator() {
            function* numberSequence() {
                let num = 1;
                while (num <= 5) {
                    yield num;
                    num++;
                }
            }
            
            numberGenerator = numberSequence();
            currentNumber = 0;
            
            document.getElementById('number-status').className = 'status-indicator status-running';
            document.getElementById('number-status-text').textContent = 'Generator running';
            document.getElementById('number-sequence').innerHTML = '';
            document.getElementById('number-output').innerHTML = 'Generator created! Click "Next Number" to get values';
        }
        
        function nextNumber() {
            if (!numberGenerator) {
                document.getElementById('number-output').innerHTML = '<span class="error">Please create a generator first!</span>';
                return;
            }
            
            const result = numberGenerator.next();
            const sequenceEl = document.getElementById('number-sequence');
            const outputEl = document.getElementById('number-output');
            
            if (!result.done) {
                currentNumber = result.value;
                sequenceEl.innerHTML += `<div class="sequence-item current-item">${result.value}</div>`;
                outputEl.innerHTML = `Generated number: <strong>${result.value}</strong><br>Next call to next() will continue execution`;
                
                // Highlight the current item briefly
                setTimeout(() => {
                    const items = sequenceEl.querySelectorAll('.sequence-item');
                    if (items.length > 0) {
                        items[items.length - 1].className = 'sequence-item generated-item';
                    }
                }, 500);
            } else {
                document.getElementById('number-status').className = 'status-indicator status-completed';
                document.getElementById('number-status-text').textContent = 'Generator completed';
                outputEl.innerHTML = '<span class="error">Generator is done! No more values to yield.</span>';
            }
        }
        
        function resetNumberGenerator() {
            numberGenerator = null;
            currentNumber = 0;
            document.getElementById('number-status').className = 'status-indicator status-paused';
            document.getElementById('number-status-text').textContent = 'Generator ready to create';
            document.getElementById('number-sequence').innerHTML = '';
            document.getElementById('number-output').innerHTML = 'Click "Create Generator" to start';
        }
        
        // ========== EXAMPLE 2: Fibonacci Generator ==========
        let fibonacciGenerator = null;
        let fibSequence = [];
        
        function createFibonacciGenerator() {
            function* fibonacci() {
                let a = 0, b = 1;
                
                while (true) {
                    yield a;
                    [a, b] = [b, a + b];
                }
            }
            
            fibonacciGenerator = fibonacci();
            fibSequence = [];
            
            document.getElementById('fibonacci-sequence').innerHTML = '';
            document.getElementById('fibonacci-output').innerHTML = 'Fibonacci generator created! Click "Next Fibonacci" to generate numbers';
        }
        
        function nextFibonacci() {
            if (!fibonacciGenerator) {
                document.getElementById('fibonacci-output').innerHTML = '<span class="error">Please create a Fibonacci generator first!</span>';
                return;
            }
            
            const result = fibonacciGenerator.next();
            const sequenceEl = document.getElementById('fibonacci-sequence');
            const outputEl = document.getElementById('fibonacci-output');
            
            fibSequence.push(result.value);
            
            // Keep only last 8 numbers for display
            const displaySequence = fibSequence.slice(-8);
            sequenceEl.innerHTML = displaySequence.map(num => 
                `<div class="sequence-item generated-item">${num}</div>`
            ).join('');
            
            outputEl.innerHTML = `
                Fibonacci sequence: ${fibSequence.join(', ')}<br>
                <em>This generator can continue indefinitely!</em>
            `;
            
            // Auto-scroll to end
            sequenceEl.scrollLeft = sequenceEl.scrollWidth;
        }
        
        function resetFibonacci() {
            fibonacciGenerator = null;
            fibSequence = [];
            document.getElementById('fibonacci-sequence').innerHTML = '';
            document.getElementById('fibonacci-output').innerHTML = 'Create a Fibonacci generator to start';
        }
        
        // ========== EXAMPLE 3: Two-Way Communication ==========
        let conversationGenerator = null;
        let conversationStep = 0;
        
        function startConversation() {
            function* twoWayGenerator() {
                const name = yield 'What is your name?';
                const age = yield `Hello ${name}! How old are you?`;
                return `Nice to meet you, ${name} (${age} years old)!`;
            }
            
            conversationGenerator = twoWayGenerator();
            conversationStep = 0;
            
            const firstQuestion = conversationGenerator.next().value;
            document.getElementById('conversation-output').innerHTML = `
                <strong>Generator:</strong> ${firstQuestion}<br>
                <em>Enter your name in the input field and click "Send Response"</em>
            `;
        }
        
        function sendResponse() {
            if (!conversationGenerator) {
                document.getElementById('conversation-output').innerHTML = '<span class="error">Please start a conversation first!</span>';
                return;
            }
            
            const input = document.getElementById('conversation-input').value;
            const outputEl = document.getElementById('conversation-output');
            
            if (!input.trim()) {
                outputEl.innerHTML += '<br><span class="error">Please enter a response!</span>';
                return;
            }
            
            conversationStep++;
            
            let result;
            if (conversationStep === 1) {
                result = conversationGenerator.next(input);
                outputEl.innerHTML += `<br><strong>You:</strong> ${input}`;
                outputEl.innerHTML += `<br><strong>Generator:</strong> ${result.value}`;
                outputEl.innerHTML += `<br><em>Enter your age and click "Send Response" again</em>`;
            } else if (conversationStep === 2) {
                result = conversationGenerator.next(input);
                outputEl.innerHTML += `<br><strong>You:</strong> ${input}`;
                outputEl.innerHTML += `<br><strong>Generator:</strong> ${result.value}`;
                outputEl.innerHTML += `<br><span class="success">Conversation completed!</span>`;
                conversationGenerator = null;
            }
            
            document.getElementById('conversation-input').value = '';
        }
        
        function resetConversation() {
            conversationGenerator = null;
            conversationStep = 0;
            document.getElementById('conversation-input').value = '';
            document.getElementById('conversation-output').innerHTML = 'Click "Start Conversation" to begin';
        }
        
        // ========== EXAMPLE 4: Async Generator ==========
        function simulateAsyncTasks() {
            const outputEl = document.getElementById('async-output');
            outputEl.innerHTML = 'Starting async tasks simulation...<br>';
            
            function* asyncTaskGenerator() {
                outputEl.innerHTML += '<br><span class="success">‚úì Starting user data fetch...</span>';
                const user = yield new Promise(resolve => 
                    setTimeout(() => resolve({ name: 'John Doe', id: 1 }), 1000)
                );
                outputEl.innerHTML += `<br><span class="success">‚úì User data received: ${JSON.stringify(user)}</span>`;
                
                outputEl.innerHTML += '<br><span class="success">‚úì Starting posts fetch...</span>';
                const posts = yield new Promise(resolve => 
                    setTimeout(() => resolve(['Post 1', 'Post 2', 'Post 3']), 800)
                );
                outputEl.innerHTML += `<br><span class="success">‚úì Posts received: ${JSON.stringify(posts)}</span>`;
                
                outputEl.innerHTML += '<br><span class="success">‚úì Starting comments fetch...</span>';
                const comments = yield new Promise(resolve => 
                    setTimeout(() => resolve(['Comment 1', 'Comment 2']), 600)
                );
                outputEl.innerHTML += `<br><span class="success">‚úì Comments received: ${JSON.stringify(comments)}</span>`;
                
                return { user, posts, comments };
            }
            
            // Async generator runner
            function runAsyncGenerator(generator) {
                const iterator = generator();
                
                function handle(result) {
                    if (result.done) {
                        outputEl.innerHTML += `<br><span class="success">üéâ All tasks completed: ${JSON.stringify(result.value)}</span>`;
                        return result.value;
                    }
                    
                    return result.value.then(data => {
                        return handle(iterator.next(data));
                    });
                }
                
                return handle(iterator.next());
            }
            
            runAsyncGenerator(asyncTaskGenerator);
        }
        
        function resetAsync() {
            document.getElementById('async-output').innerHTML = 'Click to simulate sequential API calls';
        }
        
        // ========== EXAMPLE 5: Custom Iterable ==========
        let customIterable = null;
        
        function createCustomIterable() {
            customIterable = {
                data: ['apple', 'banana', 'cherry', 'date', 'elderberry'],
                
                *[Symbol.iterator]() {
                    for (let item of this.data) {
                        yield item.toUpperCase();
                    }
                }
            };
            
            document.getElementById('iterable-sequence').innerHTML = 
                customIterable.data.map(item => 
                    `<div class="sequence-item">${item}</div>`
                ).join('');
            
            document.getElementById('iterable-output').innerHTML = 
                'Custom iterable created! Contains: ' + customIterable.data.join(', ');
        }
        
        function iterateCustom() {
            if (!customIterable) {
                document.getElementById('iterable-output').innerHTML = '<span class="error">Please create a custom iterable first!</span>';
                return;
            }
            
            const outputEl = document.getElementById('iterable-output');
            const sequenceEl = document.getElementById('iterable-sequence');
            
            outputEl.innerHTML = '<strong>Iterating through custom iterable:</strong><br>';
            
            let iterationCount = 0;
            for (let item of customIterable) {
                setTimeout(() => {
                    outputEl.innerHTML += `‚Ä¢ ${item}<br>`;
                    sequenceEl.innerHTML = customIterable.data.map((original, index) => 
                        `<div class="sequence-item ${index === iterationCount ? 'current-item' : ''}">${original}</div>`
                    ).join('');
                    iterationCount++;
                }, iterationCount * 600);
            }
            
            setTimeout(() => {
                outputEl.innerHTML += '<br><span class="success">Iteration completed!</span>';
                sequenceEl.innerHTML = customIterable.data.map(item => 
                    `<div class="sequence-item generated-item">${item.toUpperCase()}</div>`
                ).join('');
            }, (customIterable.data.length + 1) * 600);
        }
        
        function resetIterable() {
            customIterable = null;
            document.getElementById('iterable-sequence').innerHTML = '';
            document.getElementById('iterable-output').innerHTML = 'Create a custom iterable to start';
        }
        
        // Animation for the visualization
        function animateGenerator() {
            const generatorState = document.querySelector('.generator-state');
            const yieldPoint = document.querySelector('.yield-point');
            
            // Reset animations
            generatorState.style.animation = 'none';
            yieldPoint.style.animation = 'none';
            
            // Trigger reflow
            void generatorState.offsetWidth;
            void yieldPoint.offsetWidth;
            
            // Restart animations
            generatorState.style.animation = 'generatorFlow 8s infinite';
            yieldPoint.style.animation = 'yieldPoint 8s infinite';
            yieldPoint.style.animationDelay = '2s';
        }
        
        // Start the animation when the page loads
        window.addEventListener('load', animateGenerator);
        
        // Restart animation on tab focus
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden) {
                animateGenerator();
            }
        });
    </script>
</body>
</html>